cmake_minimum_required(VERSION 3.26)
project(app)

set(GLEW_USE_STATIC_LIBS ON)
find_package(SDL3 REQUIRED)
find_package(GLEW REQUIRED)

add_executable(main)

target_sources(main
PRIVATE
    main.cpp
)

target_link_libraries(main 
    PRIVATE 
        SDL3::SDL3
        GLEW::GLEW
        opengl32
)

if(MINGW)
	# This removes the need for libgcc_s_seh-1.dll and libstdc++-6.dll
	target_link_options(main PRIVATE -static-libgcc -static-libstdc++ -static)
    add_custom_command(
        TARGET main POST_BUILD
        COMMAND "${CMAKE_COMMAND}" -E copy $<TARGET_FILE:SDL3::SDL3-shared> $<TARGET_FILE_DIR:main>
        VERBATIM
    )
endif()